@(passwordChangeForm: Form[securesocial.controllers.ChangeInfo])(implicit request: RequestHeader, messages: Messages, env: securesocial.core.RuntimeEnvironment)
@import helper._
@implicitFieldConstructor = @{
    FieldConstructor(securesocial.views.html.inputFieldConstructor.f)
}

@views.html.webpage.WebpageGeneralLayout(Messages("securesocial.passwordChange.title"), None) {
    <div class="panel panel-default">
        <div class="panel-heading">
            <h2>@Messages("securesocial.passwordChange.title")</h2>
        </div>

        <div class="panel-body">

            <ul class="list-group">
            @request.flash.get("error").map { msg =>
                <li class="list-group-item list-group-item-danger">@msg</li>
            }
            </ul>

            @if(request.flash.get("success").isDefined) {

                <ul class="list-group">
                    <li class="list-group-item list-group-item-success">
                    @request.flash.get("success").get
                    </li>
                </ul>
                <div class="form-group">
                    <a class="btn btn-primary" href="@securesocial.controllers.ProviderControllerHelper.landingUrl">@Messages("securesocial.passwordChange.okButton")</a>
                </div>

            } else {

                <form action="@env.routes.passwordChangeUrl" autocomplete= "off" method="POST">
                    <div class="form-group">
                        @CSRF.formField
                        @helper.inputPassword(
                            passwordChangeForm("currentPassword"),
                            '_label -> Messages("securesocial.passwordChange.currentPassword"),
                            'class -> "form-control",
                            '_showConstraints -> false
                        )
                    </div>
                    <div class="form-group">

                    @helper.inputPassword(
                        passwordChangeForm("newPassword.password1"),
                        '_label -> Messages("securesocial.passwordChange.newPassword1"),
                        'class -> "form-control",
                        '_showConstraints -> false
                    )
                    </div>
                    <div class="form-group">

                    @helper.inputPassword(
                        passwordChangeForm("newPassword.password2"),
                        '_label -> Messages("securesocial.passwordChange.newPassword2"),
                        '_error -> passwordChangeForm.error("newPassword"),
                        'class -> "form-control",
                        '_showConstraints -> false
                    )
                    </div>

                    <div class="form-group">
                        <button type="submit" class="btn btn-primary">@Messages("securesocial.passwordChange.changeButton")</button>
                        <a class="btn btn-danger" href="@securesocial.controllers.ProviderControllerHelper.landingUrl">@Messages("securesocial.signup.cancel")</a>
                    </div>
                </form>
            }

        </div>
    </div>
}